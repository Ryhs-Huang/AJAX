@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@section Styles{
    <style></style>
}
<div id="app" class="container">
    <h3 class="mb-3 text-center">匯率計算</h3>
    <div class="form-floating mb-3">
        @* v-model做雙向繫結 *@
        <input class="form-control" v-model="rate"/>
        <label class="form-label">美金兌換臺幣匯率</label>
    </div>
    <div class="form-floating mb-3">
        @* v-model做雙向繫結 *@
        <input class="form-control" v-model="twd" />
        <label class="form-label">臺幣</label>
    </div>
    <div class="form-floating mb-3">
        @* v-model做雙向繫結 *@
        <input class="form-control" v-model="usd" />
        <label class="form-label">美金</label>
    </div>
</div>
@section Scripts {
    <script src="https://unpkg.com/vue@3.5.22/dist/vue.global.js"></script>
    <script>
         var vueApp = {
           
            data() {
                return {
                   rate:30,
                   twd:1000,
                   usd:0,
                };
            },
           
            methods: {
                FullName: function () {
                    return `${this.FirstName} ${this.LastName}`;
                },

            },
            watch:{
            twd(newVal,oriVal){
                // toFixed(2)保留小數兩位
                this.usd=(newVal/this.rate).toFixed(2);
            },
            // usd(newVal,oriVal){
            //     this.twd=(newVal*this.rate).toFixed(2);
            // },
            rate(newVal,oriVal){
				this.usd=(this.twd/newVal).toFixed(2);
				}, 
            },
            mounted:async function(){
            var baseAddress = "https://localhost:7236";
            var response = await fetch(`${baseAddress}/Home/GetExchangeRate`,{
			method: "GET",
            });
                if(response.ok){
                var data= await response.json();
                alert(JSON.stringify(data));
                }
            },
        };
        var app=Vue.createApp(vueApp).mount("#app");
    </script>
}
